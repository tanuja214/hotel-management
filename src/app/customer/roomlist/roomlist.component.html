<div class="page">
  <h2 class="title">Available Rooms</h2>

  <div class="table-wrap" *ngIf="rooms.length > 0; else noRooms">
    <table class="rooms-table">
      <thead>
        <tr>
          <th>Type</th>
          <th>Price</th>
          <th>Available</th>
          <th>Book</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of rooms">
          <td>{{ r.type }}</td>
          <td>â‚¹ {{ r.price }}</td>
          <td>{{ r.availableCount }}</td>

          <td>
            <button
              class="btn"
              [disabled]="r.availableCount <= 0 || bookingInProgress[getRoomId(r)]"
              (click)="bookRoom(r)"
            >
              {{ bookingInProgress[getRoomId(r)] ? 'Booking...' : 'Book' }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #noRooms>
    <p class="muted">No rooms available.</p>
  </ng-template>

  <p *ngIf="errorMsg" class="error">{{ errorMsg }}</p>
</div>